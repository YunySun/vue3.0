(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4c94e2c3"],{"0366":function(t,n,e){var a=e("1c0b");t.exports=function(t,n,e){if(a(t),void 0===n)return t;switch(e){case 0:return function(){return t.call(n)};case 1:return function(e){return t.call(n,e)};case 2:return function(e,a){return t.call(n,e,a)};case 3:return function(e,a,i){return t.call(n,e,a,i)}}return function(){return t.apply(n,arguments)}}},"159b":function(t,n,e){var a=e("da84"),i=e("fdbc"),r=e("17c2"),s=e("9112");for(var c in i){var o=a[c],u=o&&o.prototype;if(u&&u.forEach!==r)try{s(u,"forEach",r)}catch(h){u.forEach=r}}},"17c2":function(t,n,e){"use strict";var a=e("b727").forEach,i=e("a640"),r=i("forEach");t.exports=r?[].forEach:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}},"1c0b":function(t,n){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},"2be8":function(t,n,e){},"36c2":function(t,n,e){"use strict";e.r(n);var a=e("7a23"),i=Object(a["C"])("data-v-2e5218cc");Object(a["s"])("data-v-2e5218cc");var r={class:"wrapper"};Object(a["q"])();var s=i((function(t,n,e,i,s,c){return Object(a["p"])(),Object(a["d"])("div",r,[0===s.page?(Object(a["p"])(),Object(a["d"])("div",{key:0,class:"left-box",style:{transform:"translate3d("+s.leftBox+"px, 0, 0)"}},null,4)):Object(a["e"])("",!0),(Object(a["p"])(!0),Object(a["d"])(a["a"],null,Object(a["v"])(s.pages,(function(n,e){return Object(a["p"])(),Object(a["d"])("canvas",{class:"canvas",width:s.scrollDistance,height:t.scrollDistanceH,ref:c.setCanvasItemRef,style:{zIndex:s.pagesLeft[e]===-s.scrollDistance?0-e:999-e,transform:"translate3d("+(s.pagesLeft[e]||0)+"px, 0, 0)"}},null,12,["width","height"])})),256)),Object(a["B"])(Object(a["g"])("canvas",{id:"canvas",width:s.scrollDistance,height:t.scrollDistanceH},null,8,["width","height"]),[[a["z"],!1]])])})),c=(e("159b"),e("cf76")),o={name:"canvasBook",data:function(){return{pages:[],pagesLeft:[],loadPagesLeft:[],canvasElArr:[],page:0,total:0,leftBox:0,isCorrect:!1,scrollDistance:0}},mounted:function(){var t=this;this.$nextTick((function(){t.initBookContainer(),t.drawCanvas()})),this.init(),window.onresize=function(){t.initBookContainer()}},methods:{drawCanvas:function(){var t=this,n=this.breakLinesForCanvas("使用很寻常的二分查找，如果某一个位置之前的文字宽度小于等于设定的宽度，并且它之后一个字之前的文字宽度大于设定的宽度，那么这个位置就是文本的换行点。上面只是找到一个换行点，对于输入的一段文本，需要循环查找，直到不存在这样的换行点为止, 完整的代码如下使用很寻常的二分查找，如果某一个位置之前的文字宽度小于等于设定的宽度，并且它之后一个字之前的文字宽度大于设定的宽度，那么这个位置就是文本的换行点。上面只是找到一个换行点，对于输入的一段文本，需要循环查找，直到不存在这样的换行点为止, 完整的代码如下使用很寻常的二分查找，如果某一个位置之前的文字宽度小于等于设定的宽度，并且它之后一个字之前的文字宽度大于设定的宽度，那么这个位置就是文本的换行点。上面只是找到一个换行点，对于输入的一段文本，需要循环查找，直到不存在这样的换行点为止, 完整的代码如下使用很寻常的二分查找，如果某一个位置之前的文字宽度小于等于设定的宽度，并且它之后一个字之前的文字宽度大于设定的宽度，那么这个位置就是文本的换行点。上面只是找到一个换行点，对于输入的一段文本，需要循环查找，直到不存在这样的换行点为止, 完整的代码如下使用很寻常的二分查找，如果某一个位置之前的文字宽度小于等于设定的宽度，并且它之后一个字之前的文字宽度大于设定的宽度，那么这个位置就是文本的换行点。上面只是找到一个换行点，对于输入的一段文本，需要循环查找，直到不存在这样的换行点为止, 完整的代码如下使用很寻常的二分查找，如果某一个位置之前的文字宽度小于等于设定的宽度，并且它之后一个字之前的文字宽度大于设定的宽度，那么这个位置就是文本的换行点。上面只是找到一个换行点，对于输入的一段文本，需要循环查找，直到不存在这样的换行点为止, 完整的代码如下使用很寻常的二分查找，如果某一个位置之前的文字宽度小于等于设定的宽度，并且它之后一个字之前的文字宽度大于设定的宽度，那么这个位置就是文本的换行点。上面只是找到一个换行点，对于输入的一段文本，需要循环查找，直到不存在这样的换行点为止, 完整的代码如下使用很寻常的二分查找，如果某一个位置之前的文字宽度小于等于设定的宽度，并且它之后一个字之前的文字宽度大于设定的宽度，那么这个位置就是文本的换行点。上面只是找到一个换行点，对于输入的一段文本，需要循环查找，直到不存在这样的换行点为止, 完整的代码如下使用很寻常的二分查找，如果某一个位置之前的文字宽度小于等于设定的宽度，并且它之后一个字之前的文字宽度大于设定的宽度，那么这个位置就是文本的换行点。上面只是找到一个换行点，对于输入的一段文本，需要循环查找，直到不存在这样的换行点为止, 完整的代码如下使用很寻常的二分查找，如果某一个位置之前的文字宽度小于等于设定的宽度，并且它之后一个字之前的文字宽度大于设定的宽度，那么这个位置就是文本的换行点。上面只是找到一个换行点，对于输入的一段文本，需要循环查找，直到不存在这样的换行点为止, 完整的代码如下使用很寻常的二分查找，如果某一个位置之前的文字宽度小于等于设定的宽度，并且它之后一个字之前的文字宽度大于设定的宽度，那么这个位置就是文本的换行点。上面只是找到一个换行点，对于输入的一段文本，需要循环查找，直到不存在这样的换行点为止, 完整的代码如下",this.scrollDistance,"16px 微软雅黑");console.log(n);var e=30,a=[],i=Math.ceil(this.scrollDistanceH/30);n.forEach((function(t,n){var e=Math.floor(n/i);a[e]||(a[e]=[]),a[e].push(t)})),this.pages=a,this.total=this.pages.length,this.$nextTick((function(){console.log(t.canvasElArr),t.canvasElArr.forEach((function(n,a){var i=n.getContext("2d");i.font="16px 微软雅黑",t.pages[a].forEach((function(t,n){i.fillText(t,0,e*n+30)}))}))}))},limitPosition:function(t){return Math.max(Math.min(0,t),-this.scrollDistance)},setCanvasItemRef:function(t){this.canvasElArr.push(t)},findBreakPoint:function(t,n,e){var a=0,i=t.length-1;while(a<=i){var r=Math.floor((a+i)/2),s=e.measureText(t.substr(0,r)).width,c=e.measureText(t.substr(0,r+1)).width;if(s<=n&&c>n)return r;s<n?a=r+1:i=r-1}return-1},breakLinesForCanvas:function(t,n,e){var a=document.getElementById("canvas"),i=a.getContext("2d"),r=[],s=0;e&&(i.font=e);while(-1!==(s=this.findBreakPoint(t,n,i)))r.push(t.substr(0,s)),t=t.substr(s);return t&&r.push(t),r},init:function(){this.bindTouchEvents()},initBookContainer:function(){this.left=0,this.scrollDistance=document.body.clientWidth||document.documentElement.clientWidth,this.scrollDistanceH=document.body.clientHeight||document.documentElement.clientHeight,this.leftBox=-this.scrollDistance,console.log(this.leftBox)},bindTouchEvents:function(){this.$el.addEventListener("touchstart",this.touchStart),this.$el.addEventListener("touchmove",this.touchMove),this.$el.addEventListener("touchend",this.touchEnd)},touchStart:function(t){this.isCorrect||(this.touchX=t.touches[0].clientX,this.currentX=this.touchX,this.distance=0)},touchMove:function(t){if(!this.isCorrect){var n=t.touches[0].clientX-this.currentX,e=this.page,a=n>0?Math.pow(n,.8):-Math.pow(Math.abs(n),.8);this.currentX>this.touchX&&(e-=1),this.pagesLeft[e]=this.limitPosition((this.pagesLeft[e]||0)+a),this.currentX=t.touches[0].clientX,this.distance=this.currentX-this.touchX,(this.distance>0&&this.page<=0||this.distance<0&&this.page>=this.total-1)&&(this.distance=0,this.pagesLeft[this.page]=0)}},touchEnd:function(){this.isCorrect||0!==this.distance&&(this.isCorrect=!0,this.correctPosition())},correctPosition:function(){var t=this;setTimeout((function(){var n,e=null,a=t;cancelAnimationFrame(e),e=requestAnimationFrame((function t(){a.distance<0?(n=a.pagesLeft[a.page],n>-a.scrollDistance?(a.pagesLeft[a.page]=Math.ceil(c["a"].Quart.easeInOut(10,n,-10,10)),e=requestAnimationFrame(t)):(cancelAnimationFrame(e),a.pagesLeft[a.page]=-a.scrollDistance,a.page++,a.isCorrect=!1)):a.distance>0&&(n=a.pagesLeft[a.page-1],n<0?(a.pagesLeft[a.page-1]=Math.ceil(c["a"].Quart.easeInOut(10,n,10,10)),e=requestAnimationFrame(t)):(cancelAnimationFrame(e),a.pagesLeft[a.page-1]=0,a.page--,a.isCorrect=!1))}))}))}}};e("a547b");o.render=s,o.__scopeId="data-v-2e5218cc";n["default"]=o},"65f0":function(t,n,e){var a=e("861d"),i=e("e8b5"),r=e("b622"),s=r("species");t.exports=function(t,n){var e;return i(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!i(e.prototype)?a(e)&&(e=e[s],null===e&&(e=void 0)):e=void 0),new(void 0===e?Array:e)(0===n?0:n)}},a547b:function(t,n,e){"use strict";e("2be8")},a640:function(t,n,e){"use strict";var a=e("d039");t.exports=function(t,n){var e=[][t];return!!e&&a((function(){e.call(null,n||function(){throw 1},1)}))}},b727:function(t,n,e){var a=e("0366"),i=e("44ad"),r=e("7b0b"),s=e("50c4"),c=e("65f0"),o=[].push,u=function(t){var n=1==t,e=2==t,u=3==t,h=4==t,f=6==t,l=7==t,d=5==t||f;return function(p,v,b,g){for(var M,O,m=r(p),I=i(m),w=a(v,b,3),x=s(I.length),E=0,C=g||c,y=n?C(p,x):e||l?C(p,0):void 0;x>E;E++)if((d||E in I)&&(M=I[E],O=w(M,E,m),t))if(n)y[E]=O;else if(O)switch(t){case 3:return!0;case 5:return M;case 6:return E;case 2:o.call(y,M)}else switch(t){case 4:return!1;case 7:o.call(y,M)}return f?-1:u||h?h:y}};t.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterOut:u(7)}},cf76:function(t,n,e){"use strict";var a={Linear:function(t,n,e,a){return e*t/a+n},Quad:{easeIn:function(t,n,e,a){return e*(t/=a)*t+n},easeOut:function(t,n,e,a){return-e*(t/=a)*(t-2)+n},easeInOut:function(t,n,e,a){return(t/=a/2)<1?e/2*t*t+n:-e/2*(--t*(t-2)-1)+n}},Cubic:{easeIn:function(t,n,e,a){return e*(t/=a)*t*t+n},easeOut:function(t,n,e,a){return e*((t=t/a-1)*t*t+1)+n},easeInOut:function(t,n,e,a){return(t/=a/2)<1?e/2*t*t*t+n:e/2*((t-=2)*t*t+2)+n}},Quart:{easeIn:function(t,n,e,a){return e*(t/=a)*t*t*t+n},easeOut:function(t,n,e,a){return-e*((t=t/a-1)*t*t*t-1)+n},easeInOut:function(t,n,e,a){return(t/=a/2)<1?e/2*t*t*t*t+n:-e/2*((t-=2)*t*t*t-2)+n}},Quint:{easeIn:function(t,n,e,a){return e*(t/=a)*t*t*t*t+n},easeOut:function(t,n,e,a){return e*((t=t/a-1)*t*t*t*t+1)+n},easeInOut:function(t,n,e,a){return(t/=a/2)<1?e/2*t*t*t*t*t+n:e/2*((t-=2)*t*t*t*t+2)+n}},Sine:{easeIn:function(t,n,e,a){return-e*Math.cos(t/a*(Math.PI/2))+e+n},easeOut:function(t,n,e,a){return e*Math.sin(t/a*(Math.PI/2))+n},easeInOut:function(t,n,e,a){return-e/2*(Math.cos(Math.PI*t/a)-1)+n}},Expo:{easeIn:function(t,n,e,a){return 0==t?n:e*Math.pow(2,10*(t/a-1))+n},easeOut:function(t,n,e,a){return t==a?n+e:e*(1-Math.pow(2,-10*t/a))+n},easeInOut:function(t,n,e,a){return 0==t?n:t==a?n+e:(t/=a/2)<1?e/2*Math.pow(2,10*(t-1))+n:e/2*(2-Math.pow(2,-10*--t))+n}},Circ:{easeIn:function(t,n,e,a){return-e*(Math.sqrt(1-(t/=a)*t)-1)+n},easeOut:function(t,n,e,a){return e*Math.sqrt(1-(t=t/a-1)*t)+n},easeInOut:function(t,n,e,a){return(t/=a/2)<1?-e/2*(Math.sqrt(1-t*t)-1)+n:e/2*(Math.sqrt(1-(t-=2)*t)+1)+n}},Elastic:{easeIn:function(t,n,e,a,i,r){var s;return 0==t?n:1==(t/=a)?n+e:(r||(r=.3*a),!i||i<Math.abs(e)?(i=e,s=r/4):s=r/(2*Math.PI)*Math.asin(e/i),-i*Math.pow(2,10*(t-=1))*Math.sin((t*a-s)*(2*Math.PI)/r)+n)},easeOut:function(t,n,e,a,i,r){var s;return 0==t?n:1==(t/=a)?n+e:(r||(r=.3*a),!i||i<Math.abs(e)?(i=e,s=r/4):s=r/(2*Math.PI)*Math.asin(e/i),i*Math.pow(2,-10*t)*Math.sin((t*a-s)*(2*Math.PI)/r)+e+n)},easeInOut:function(t,n,e,a,i,r){var s;return 0==t?n:2==(t/=a/2)?n+e:(r||(r=a*(.3*1.5)),!i||i<Math.abs(e)?(i=e,s=r/4):s=r/(2*Math.PI)*Math.asin(e/i),t<1?i*Math.pow(2,10*(t-=1))*Math.sin((t*a-s)*(2*Math.PI)/r)*-.5+n:i*Math.pow(2,-10*(t-=1))*Math.sin((t*a-s)*(2*Math.PI)/r)*.5+e+n)}},Back:{easeIn:function(t,n,e,a,i){return void 0==i&&(i=1.70158),e*(t/=a)*t*((i+1)*t-i)+n},easeOut:function(t,n,e,a,i){return void 0==i&&(i=1.70158),e*((t=t/a-1)*t*((i+1)*t+i)+1)+n},easeInOut:function(t,n,e,a,i){return void 0==i&&(i=1.70158),(t/=a/2)<1?e/2*(t*t*((1+(i*=1.525))*t-i))+n:e/2*((t-=2)*t*((1+(i*=1.525))*t+i)+2)+n}},Bounce:{easeIn:function(t,n,e,i){return e-a.Bounce.easeOut(i-t,0,e,i)+n},easeOut:function(t,n,e,a){return(t/=a)<1/2.75?e*(7.5625*t*t)+n:t<2/2.75?e*(7.5625*(t-=1.5/2.75)*t+.75)+n:t<2.5/2.75?e*(7.5625*(t-=2.25/2.75)*t+.9375)+n:e*(7.5625*(t-=2.625/2.75)*t+.984375)+n},easeInOut:function(t,n,e,i){return t<i/2?.5*a.Bounce.easeIn(2*t,0,e,i)+n:.5*a.Bounce.easeOut(2*t-i,0,e,i)+.5*e+n}}};n["a"]=a},e8b5:function(t,n,e){var a=e("c6b6");t.exports=Array.isArray||function(t){return"Array"==a(t)}}}]);